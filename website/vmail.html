<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
      <title>Vmail</title>
      <link href="stylesheets-vmail/reset.css?1292359285" media="screen" rel="stylesheet" type="text/css" />
      <link href="stylesheets-vmail/960.css?1292359285" media="screen" rel="stylesheet" type="text/css" />
      <link href="stylesheets-vmail/text.css?1292359285" media="screen" rel="stylesheet" type="text/css" />
      <link href="stylesheets-vmail/site.css?1292359285" media="screen" rel="stylesheet" type="text/css" />
      <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script><script type="text/javascript">stLight.options({publisher:'8579b5f8-0860-4ea6-9ef1-6f0f58359a99'});</script>
      <script type="text/javascript" src="lightbox2/js/prototype.js"></script>
      <script type="text/javascript" src="lightbox2/js/scriptaculous.js?load=effects,builder"></script>
      <script type="text/javascript" src="lightbox2/js/lightbox.js"></script>
      <link rel="stylesheet" href="lightbox2/css/lightbox.css" type="text/css" media="screen" />

  </head>
  <body>
    <div class="container_12">
      <div class="grid_10 alpha" id="main">
        <h1>vmail</h1>

<p>vmail is a Vim interface to Gmail. Here are some screenshots:</p>

<p><a href="images-vmail/1.png" rel="lightbox[screens]"><img src="images-vmail/1-small.png" /></a>
<a href="images-vmail/autocomplete.png" rel="lightbox[screens]"><img src="images-vmail/autocomplete-small.png" /></a>
<a href="images-vmail/attach.png" rel="lightbox[screens]"><img src="images-vmail/attach-small.png" /></a></p>


<p>Why vmail? Because some people love using Vim 1000 times more than using
a web browser.</p>

<h2>Prerequisites</h2>

<ul>
<li>a Gmail account</li>
<li>a relatively recent version of Vim (vmail is developed against Vim 7.3)</li>
<li>Ruby (vmail is developed using Ruby 1.9.2)</li>
<li>RubyGems (if Ruby version is older than 1.9)</li>
<li>the <code>lynx</code> text-only-mode web browser is required to view HTML mail parts in vmail</li>
</ul>


<p>The current version of vmail assumes a Unix environment. I'll try to make later versions accommodate Windows.</p>

<h2>Installation</h2>

<pre><code>gem install vmail
</code></pre>

<h2>Configuration file</h2>

<p>To run vmail, create a yaml file called <code>.vmailrc</code> and save it either in the
current directory (the directory from which you launch vmail) or in your home
directory.</p>

<p>The <code>.vmailrc</code> file should look something like this. Substitute your own values.</p>

<pre><code>username: dhchoi@gmail.com
password: password
name: Daniel Choi
signature: |
  --
  Sent from vmail. http://danielchoi.com/software/vmail.html
</code></pre>

<p>This file should be formatted in <a href="http://www.yaml.org/spec/1.2/spec.html">YAML syntax</a>.</p>

<p>You can omit the password key-value pair if you'd rather not have the password
saved in the file. In that case, you'll prompted for the password each time you
start vmail.</p>

<h2>Contacts autocompletion</h2>

<p>vmail uses vim autocompletion to help you auto-complete email addresses.
To use this feature, generate a <code>vmail-contacts.txt</code> file in the current or
home directory. This is a simple list of your email contacts.
Invoking vmail with the <code>-g</code> option generates this file for you by
collecting all the recipients and cc's from your last 500 sent
emails. You can adjust this number by using <code>-g</code> with a number argument.</p>

<p>After vmail generates this file for you, you can edit it however and whenever
you want, as long as there is one address per line.</p>

<h2>Starting vmail</h2>

<p>Once you've created the configuration file and (optionally) the contacts file,
you can start vmail with</p>

<pre><code>vmail
</code></pre>

<p>This opens the vmail/vim interface and shows you the last 100 messages in your
Gmail inbox.</p>

<p>You can have vmail show messages from any other mailbox (a.k.a. label) on
startup by passing in the mailbox name as an argument:</p>

<pre><code>vmail starred
</code></pre>

<p>You can also pass in search parameters:</p>

<pre><code>vmail important from barackobama@whitehouse.gov
</code></pre>

<p>On startup, vmail loads 100 messages by default. You can increase or decrease
this number by passing in a number after the mailbox name:</p>

<pre><code>vmail inbox 700 subject unix
</code></pre>

<h2>Viewing messages</h2>

<p>The first screen vmail shows you is a list of messages. You can view a message
by moving the cursor line to it and pressing ENTER. This will split the screen
and show the message content in the bottom pane.</p>

<p>To full-screen the message, press SPACE when the cursor is in the message window.
To go back to the split view, press ENTER.</p>

<p>You can full-screen the list window by pressing SPACE while the cursor is in it.</p>

<p>In the split view, you can jump between the two panes by just pressing ENTER
from either window.</p>

<p>You can also use <code>&lt;C-p&gt;</code> and <code>&lt;C-n&gt;</code> from either window to show the previous or
next message.</p>

<p>vmail loads a certain number messages at a time, starting with the most recent.
If there are more messages that vmail hasn't loaded, you'll see a line at the
top of the list that looks something like this:</p>

<pre><code>&gt; Load 100 more messages. 156 remaining.
</code></pre>

<p>Put the cursor on this line and press ENTER to load more of these messages.</p>

<p>Unread messages are marked with a <code>[+]</code> symbol.</p>

<p>To view the raw RFC822 version of a message, type <code>,R</code> while viewing the message.</p>

<h2>Starring, deleting, archiving, marking spam</h2>

<p>To star a message, put the cursor on it and type <code>,*</code> or alternatively <code>s</code>.
Starring a message copies it to the <code>starred</code> mailbox.  Starred messages are
marked with a <code>[*]</code> symbol and color-highlighted.</p>

<p>To delete a message, put the cursor on it and type <code>,#</code> or alternatively <code>,d</code>.
Deleting a message puts it in the <code>trash</code> mailbox. Deleting a message from the
<code>trash</code> mailbox deletes it permanently.</p>

<p>To archive a message, put the cursor on it and type <code>,e</code>.  Archiving a message
moves it to the <code>all</code> mailbox.</p>

<p>To mark a message spam, put the cursor on it and type <code>,!</code>. This moves the
message to to the <code>spam</code> mailbox.</p>

<p>You can use range selections in the message list when you star, delete, mark as
spam, or archive. Use <code>&lt;C-v&gt;</code> to start marking a range of lines (the vertical
position of the cursor doesn't matter).  Then type any of the above commands to
perform an action on all the messages you selected.</p>

<h2>Checking for new messages</h2>

<p>To check for new messages in the current mailbox, press <code>u</code> in normal mode and
watch the status line.</p>

<h2>Switching mailboxes, moving messages, copying messages to another mailbox</h2>

<p>To switch mailboxes, type <code>,m</code>. You'll see an autocomplete window appear at the top.
The standard vim autocomplete keystrokes apply:</p>

<ul>
<li><code>C-p</code> and <code>C-n</code> move you up and down the match list</li>
<li><code>C-e</code> closes the match list and lets you continue typing</li>
<li><code>C-u</code>: when the match list is active, cycles forward through the match list and what you've typed so far; when the match list is inactive, erases what you've typed.</li>
<li><code>C-x C-u</code> finds matches for what you've typed so far (when the match list window is closed)</li>
<li><code>C-y</code> selects the highlighted match without triggering ENTER</li>
<li>ENTER selects the highlighted match from the match list</li>
</ul>


<p>Tip: start typing the first 1-3 characters of the mailbox name, then press
<code>C-u</code> or <code>C-p</code> until you highlight the right match, and finally press ENTER to
select.</p>

<p>To move a message to another mailbox, put the cursor on the message in the
message list, and type <code>,b</code>. You'll be prompted to select the target mailbox.</p>

<p>To copy a message to another mailbox, put the cursor on the message in the
message list, and type <code>,B</code>. You'll be prompted to select the target mailbox.</p>

<h2>Composing messages</h2>

<p>To start writing a new a email message, type <code>,c</code>.</p>

<p>To reply to a message, type <code>,r</code>.</p>

<p>To reply-all to a message, type <code>,a</code>.</p>

<p>To forward a message, type <code>,f</code>.</p>

<p>All these command open a message composition window. At the top, you will see
mail headers like this:</p>

<pre><code>from: Daniel Choi &lt;dhchoi@gmail.com&gt;
to:
subject:
</code></pre>

<p>The <code>from:</code> field will be pre-filled from your <code>.vmailrc</code> configuration.
You're responsible for fill in the <code>to:</code> and the <code>subject:</code> fields.
You can add a <code>cc:</code> and <code>bcc:</code> field if you want.</p>

<p>When you fill in the recipient addresses, you can use vim autocompletion if you
generated a <code>vmail-contacts.txt</code> file. Start typing a name or email address,
then press <code>C-x C-u</code> to invoke autocompletion.</p>

<p>Tip: Use <code>C-y</code> instead of ENTER to select a match. This will prevent you from
creating a blank line in the middle of the email headers.</p>

<p>Make sure your email addresses are separated by commas and that they all
ultimately appear on the <strong>same, unbroken line</strong> for each field. Vim will
probably break long lines automatically as you type them, so for now (pending a
future enhancement), you'll have to rejoin the lines if breaks get inserted.</p>

<p>After you fill in the headers, write your message.  Make sure there is a
blank line between the headers and the body of your message.</p>

<p>When you're done writing, send the message by typing <code>,vs</code> in normal mode.</p>

<p>While you're composing a message in the composition window, you can save a
draft to a local file with the standard vim <code>:w</code> command:</p>

<pre><code>:w my_draft_filename.txt 
</code></pre>

<p>Make sure you append *.txt to the filename, or else vmail won't recognize it as
a potential email when you reload it.</p>

<p>Make sure you don't use <code>:wq</code> unless you mean to quit vmail immediately. After
you save the draft to a file, you can go back to the message list by typing <code>q</code>
in normal mode.</p>

<p>To resume writing the draft later, just type <code>:e my_draft_filename.txt</code> to load
the draft email into a buffer. (Use <code>:e!</code> if you're already in the message
composition window.) Resume editing. Send by typing <code>,vs</code>.</p>

<p>At any point, you can quit the composition window by typing <code>q</code> in normal mode.</p>

<h2>Attachments</h2>

<p>The current version of vmail can handle attachments to a certain extent.</p>

<p>When you're viewing a message with attachments, you'll see something like this
at the top of the message window:</p>

<pre><code>INBOX 2113 4 kb
- image/png; name=canada.png
- image/gif; name=arrow_right.gif
---------------------------------------
from: Daniel Choi &lt;dhchoi@gmail.com&gt;
date: Sun, Dec 12 08:39 AM -05:00 2010
to: Daniel Choi &lt;dhchoi@gmail.com&gt;
subject: attachment test

see attached
</code></pre>

<p>To download these attachments to a local directory, type <code>,A</code>. You'll be
prompted for a directory path.  Then vmail will save all the attachments in the
message to this directory.</p>

<p>To send attachments, add something like this to your new message in the message
composition window:</p>

<pre><code>from: Daniel Choi &lt;dhchoi@gmail.com&gt;
to: barackobama@whitehouse.gov
subject: look at this!

attach:
- images/middle-east-map.png
- images/policypaper.pdf
- docs/

I think you'll find this stuff interesting.
</code></pre>

<p>The <code>attach:</code> block is a YAML list. The items are paths (either relative or
absolute) to the files you want to attach to your message. Note that you can
also specify a directory, in which case vmail attaches every file it finds in
that directory.</p>

<p>One thing vmail doesn't do yet is let you forward a message with all its
attachments intact.  This feature will be implemented in the near future.</p>

<h2>Printing messages to a file</h2>

<p><code>,vp</code> from the message list prints (appends) the text content of all the selected
messages to a file.</p>

<h2>Invoking your web browser</h2>

<p>When you're reading a message, <code>,o</code> opens the first hyperlink in the document
on or after the cursor in your normal web browser.</p>

<p>When you're reading a message with an html mail part, <code>,h</code> saves that part to a
local file (<code>vmail-htmlpart.html</code>) and opens it in your normal web browser.</p>

<p>By default, the command vmail uses to open your web browser is <code>open</code>. In OS X,
this opens URLs and HTML files in the default web browser.  You can change the
browser vmail invokes by setting the VMAIL_BROWSER environmental variable
before you start vmail, e.g.:</p>

<pre><code>export VMAIL_BROWSER='elinks'
</code></pre>

<h2>Search queries</h2>

<p>vmail can generate a message list by performing an IMAP search on the current mailbox.
From the message list window, type <code>,s</code>. This will prompt you for a search query.
The search query is an optional number specifying the number of messages to return,
followed by a valid IMAP search query.</p>

<p>Here are some example search queries.</p>

<pre><code># the default 
100 all  

# all messages from thematrix.com domain
from thematrix.com  

# all messages from this person
from barackobama@whitehouse.gov  

# subject field search; use double quotes to enclose multiple words
subject "unix philosophy"  

# example of date range and multiple conditions
before 30-Nov-2010 since 1-Nov-2010 from prx.org  
</code></pre>

<p>Tip: When you're entering your search query, <code>&lt;C-u&gt;</code> clears the query line.</p>

<p>Power-Tip: When you're at the search query prompt, <code>&lt;C-f&gt;</code> opens a mini-editor
that contains the current query plus a history of previous vmail search
queries. You can edit any line in this mini-editor and press ENTER to perform
the query on that line.</p>

<h2>Using vmail with MacVim</h2>

<p>vmail uses standard Vim by default, but vmail also works with MacVim, but not
perfectly. In particular, there seems to be a bug in MacVim that prevents
vmail's status line activity messages from appearing properly. Nonetheless,
most of vmail is functional in MacVim.</p>

<p>To use MacVim as your vmail Vim engine, <code>export VMAIL_VIM=mvim</code> before starting
vmail.</p>

<p>Note that when vmail uses MacVim, the terminal window in which you invoke vmail
will show vmail's logging output while MacVim is running. To quit vmail in
MacVim mode, you will have to press CTRL-c in this window to stop the vmail
process in after quitting the MacVim app.</p>

<h2>vmail file byproducts</h2>

<p>vmail generates a few file byproducts when it is running. It generates a
temporary <code>vmailbuffer.txt</code> file in the current directory to hold the message
list. This should get deleted automatically when vmail quits.</p>

<p>vmail also creates a <code>vmail-htmlpart.html</code> file in the current directory if you
open an HTML mail part from vmail.</p>

<p>Finally, vmail logs output to a <code>vmail.log</code> file which it creates in the
current directory. You can tail this file in a separate terminal window to see
what's going on behind the scenes as you use vmail.</p>

<h2>Is my gmail password secure?</h2>

<p>In short, yes. vmail uses TLS (<a href="http://en.wikipedia.org/wiki/Transport_Layer_Security">Transport Layer Security</a>) to perform IMAP
and SMTP authentication. So vmail transmits your password securely over the
network.</p>

<p>You can also be sure that the vmail code doesn't do anything nefarious with
your Gmail password because vmail is open source. Anyone can inspect the source
code of the copy of vmail that runs on your computer and inspect the latest
vmail code at the <a href="https://github.com/danchoi/vmail">github repository</a> and at <a href="https://rubygems.org/gems/vmail">rubygems.org</a> (where the
vmail gem is downloaded from).</p>

<h2>Bug reports, feature requests</h2>

<p>Please file bug reports and feature requests in the <a href="https://github.com/danchoi/vmail/issues">vmail github issue tracker</a>.</p>

<h2>How to contact the developer</h2>

<p>My name is Daniel Choi. I am based in Cambridge, MA, and you can email me at dhchoi@gmail.com.</p>


<h2>How to support the vmail project</h2>

<p>If you find vmail very useful, feel free to drop me a note to say so. If you have
a bug to report or a good feature to suggest, please file it on the <a href="https://github.com/danchoi/vmail/issues">issue tracker</a>.
Few things make this software developer happier than knowing that people find my
software useful.</p>

<p>Please do not feel obligated to donate money simply because you use vmail. But if you
want to donate some money to support the independent software developer behind
vmail, use this PayPal button:</p>

<p><form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="YC3S3D5RFMJSC">
<input type="image" src="https://www.paypal.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form></p>

      </div>
      <div class="grid_2 omega">
        
          <div class="sidebar">

            <h4>share this</h4>

<span class="st_twitter_large" displayText="Tweet"></span><span class="st_facebook_large" displayText="Facebook"></span><span class="st_ybuzz_large" displayText="Yahoo! Buzz"></span><span class="st_gbuzz_large" displayText="Google Buzz"></span><span class="st_email_large" displayText="Email"></span><span class="st_sharethis_large" displayText="ShareThis"></span>

            <h4>links</h4>
            <ul>
              <li><a href="https://github.com/danchoi/vmail">github repo</a></li>
              <li><a href="https://rubygems.org/gems/vmail">rubygems page</a></li>
            </ul>
          </div>
   
      </div>
    </div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  var pageTracker = _gat._getTracker("UA-4028996-5");
  pageTracker._initData();
  pageTracker._trackPageview();
</script>
  </body>
</html>
